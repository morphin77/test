# README
## Комментарии
1. Возможные права для действий и ресурсов хрянятся в отдельных таблицах - так мы имеем возможность создавать права для каждого действия/таблицы отдельно
2. Использовал отдельные таблицы для пользовательских прав на ресурсы и экшены - так как это две идеологически разные сущности
3. Пользователи и группы разделены на разные таблицы и связаны через join-таблицу. В этом случае легко завести какие-либо надстройки для ролей(например иерархия) и пользователей (добавить доп. поля)
4. Тесты только **сквозные** - считаю чтов рамках данной задачи писать все тесты нет смысла
5. Бизнес-логика вынесена в сервисы (app/services) - контроллер отвечает только за работу с параметрами запроса и за возврат ответа
## Возможные доработки
По моему мнению необходимо было бы группировать сервисы средствами модулей в соответствии предметной областью и для каждой предметной области написать контроллер который бы обрабатывал запросы. В таком случае мы бы имели следующую архитектуру:
1. Слой presenters - контроллеры
2. Слой бизнес-логики - сервисы сгруппированные по принципу DDD
3. Cлой доступа к данным - модели

В рамках данной задачи это избыточно

## Disclaimer
Провайдер проводит работы на линии по этому красивого GitFlow нет... Прошу прощения
## Установка
После скачивания/распаковывания необходимо установить зависимости:
```bash
bundle install
```
после этого необходимо инициализтровать, создать и заполнить БД:
```bash
rails db:setup
```

## Тестирование
rspec, Тестовая бд заполняется при запуске тестов сидами
## Примеры работы

После установки можно использовать приложение с демо-данными:

Установка привелегий для **одного** пользователя на `действие(Action)`:
```
curl --request POST \
  --url http://localhost:3000/set_user_action_permission \
  --header 'content-type: application/json' \
  --data '{
	"user": "Mike",
	"action_name": "reboot_server",
	"permission": "grant"
}'
```
Установка привелегий для **роли** на `действие(Action)`:
```
curl --request POST \
  --url http://localhost:3000/set_role_action_permission \
  --header 'content-type: application/json' \
  --data '{
	"role": "admin",
	"action_name": "reboot_server",
	"permission": "grant"
}'
```

Установка привелегий для **одного** пользователя на `ресурс(Resource)`:
```
curl --request POST \
  --url http://localhost:3000/set_user_resource_permission \
  --header 'content-type: application/json' \
  --data '{
	"user": "Mike",
	"resource_name": "reboot_server",
	"permission": "grant"
}'
```
Установка привелегий для **роли** на `ресурс(Resource)`:
```
curl --request POST \
  --url http://localhost:3000/set_role_resource_permission \
  --header 'content-type: application/json' \
  --data '{
	"role": "admin",
	"resource_name": "reboot_server",
	"permission": "grant"
}'
```